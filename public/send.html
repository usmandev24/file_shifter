<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/styles/main_styles.css" />
    <title>Send To Device</title>
  </head>
  <body>
    <div
      class="flex flex-1 justify-between items-center border-b border-base-300 m-auto"
    >
      <div class="w-[2rem]"></div>
      <h1 class="text-xl lg:text-2xl p-2 ml-2 font-bold">
        <a href="./index.html">Data Shifter</a>
      </h1>

      <div class="dropdown dropdown-end dropdown-bottom">
        <div
          role="button"
          tabindex="0"
          class="btn text-xl w-8 h-12 mr-4 rotate-90"
        >
          |||
        </div>
        <ul
          class="dropdown-content bg-base-100 border border-gray-500 rounded-lg menu menu-vertical w-32 z-10 p-2"
        >
          <li class=""><a class="btn mb-1" href="send.html">Send</a></li>
          <li class=""><a class="btn mb-1" href="send.html">Recieve</a></li>
          <li class=""><a class="btn-link m-1" href="send.html">About</a></li>
        </ul>
      </div>
    </div>
    <div
      class="flex flex-1 flex-col h-100 m-2 md:m-12 lg:m-16 items-center justify-center-safe"
    >
      <div class="card card-md  md:card:md lg:card-lg xl:card-xl bg-base-300">
        <div class="card-body items-center p-4 md:p-8">
          <h2 class="card-title text-xl mt-2">Send To Other Device (PC/Mobile)</h2>
          <p class="mt-2">
            Make sure your both devices conected to same WIFI network or One
            device connected with hotspot of other device. Like your PC
            connected with your Mobile Hotspot .
          </p>
          <div class="card-actions mt-2">
            <input
              type="file"
              multiple
              id="file-input"
              class="input  file-input file-input-primary  active:file-input-success"
            />
          </div>
          <div class="w-full " id="show-files">

          </div>
          <!--
          <div
            class="flex flex-col bg-base-200 w-full p-2 border border-base-100 rounded-lg"
          >
            <div class="flex justify-between items-center bg-white rounded-lg p-1">
              <h3 class="">Watch-ImranKhan_the=playerwith-best-ksdkj.mp4 </h3>
              <a class=" btn btn-secondary ">good</a>
            </div>
            <div class="flex flex-row flex-1 justify-items-center items-center">
              <progress class=" progress bg-green-200 h-4 text-green-600 mr-4 "></progress>
              <p class="w-max p-2"> 50% </p>
              <p class="w-max ml-auto p-2 ">34.23_MB/s</p>
              <p class="p-2"><span>13s</span>_Left</p>
            </div>
          </div>
        -->
          
        </div>
      </div>
    </div>
    <script>
      const file_input = document.getElementById('file-input');
      const show_files = document.getElementById('show-files');
      file_input.onchange = show;

      function show() {
        Array.from(file_input.files).map((file, index) => {
        console.log(file)
        const oneFileSet = document.createElement('div');
        oneFileSet.className = "flex flex-col  w-full p-2 mt-3 border border-base-100 rounded-lg bg-base-200";
        const nameRow = document.createElement('div')
        nameRow.className = "flex justify-between items-center rounded-lg p-1 pr-2";

        const name = document.createElement('h3');
        let fileSize = (file.size/(1024*1024)).toFixed(2) + "MB";
        if (file.size/(1024*1024) < 1 ) fileSize = (file.size/1024).toFixed(2) + "KB"
        name.textContent = `${file.name} (${fileSize})`;

        const sdBtn = document.createElement('button');
        sdBtn.className = "btn btn-sm md:btn-md lg:btn-lg btn-secondary"
        sdBtn.textContent = 'Send';
        
        

        const pRow = document.createElement('div');
        pRow.className = " flex-row flex-1 justify-items-center items-center";
        pRow.style.display = "none"
        const pbar = document.createElement('progress');
        pbar.max = 100;
        pbar.value = 30;
        pbar.className = " progress progress-primary  h-3 md:h-4  mr-4";
        const percent = document.createElement("p");
        percent.className = " p-2 " ; percent.textContent = '50%';
        const speed = document.createElement("p");
        speed.className = "p-2"; speed.textContent = "10.00MB/s"

        pRow.appendChild(pbar); pRow.appendChild(percent) ; pRow.appendChild(speed)

        nameRow.appendChild(name);
        nameRow.appendChild(sdBtn);
        oneFileSet.appendChild(nameRow);
        oneFileSet.appendChild(pRow);
        show_files.appendChild(oneFileSet);

        sdBtn.onclick = () => {
          if (pRow.style.display === 'none') {
            pRow.style.display = "flex";
            
          } else {
            pRow.style.display = "none";
            oneFileSet.classList.replace("bg-base-200")
            
          }

        }
      })
        
      }
      
    </script>
  </body>
</html>
